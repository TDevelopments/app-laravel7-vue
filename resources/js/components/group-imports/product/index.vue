<template>
  <v-dialog transition="dialog-bottom-transition" max-width="1200" v-model="show">
    <v-toolbar color="primary" dark class="text-h6 mb-2">
      Detalles del producto
      <v-spacer></v-spacer>
      <v-btn icon @click="show = false">
        <v-icon>mdi-close</v-icon>
      </v-btn>
    </v-toolbar>
    <v-card>
      <v-card-text>
        <v-row>
          <v-col cols="12" sm="12" md="6" lg="6">
            <div class="text-center">
              <ZoomOnHover
                img-normal="https://cdn.vuetifyjs.com/images/parallax/material.jpg"
                v-if="product.images == null || product.images.length == 0"
              ></ZoomOnHover>

              <ZoomOnHover :img-normal="product.images[model].path" v-else></ZoomOnHover>
            </div>
            <v-sheet class="mx-auto" max-width="800">
              <v-slide-group v-model="model" show-arrows>
                <v-slide-item
                  v-if="product.images == null || product.images.length == 0"
                  v-slot="{ active, toggle }"
                >
                  <v-img
                    src="https://cdn.vuetifyjs.com/images/parallax/material.jpg"
                    max-width="120"
                    height="90"
                    contain
                    class="m-1"
                    @click="toggle"
                  />
                </v-slide-item>
                <v-slide-item
                  v-else
                  v-slot="{ active, toggle }"
                  v-for="(item, index) in product.images"
                  :key="index"
                >
                  <v-img
                    :src="item.path"
                    max-width="140"
                    height="90"
                    contain
                    class="m-1"
                    @click="toggle"
                  />
                </v-slide-item>
              </v-slide-group>
            </v-sheet>
          </v-col>
          <v-col cols="12" sm="12" md="6" lg="6">
            <v-card-text>
              <div class="my-4 text-h4">
                {{ product.model }}
              </div>
              <div>
                <p v-for="(item, index) in product.description" :key="index">
                  <v-icon color="black" x-small>mdi-circle</v-icon>
                  {{ item }}
                </p>
                <p>
                  <v-icon color="black" x-small>mdi-circle</v-icon>
                  <strong>GÃ©nero:</strong>
                  {{
                    product.gender == 'female'
                      ? 'Femenino'
                      : product.gender == 'masculine'
                      ? 'Masculino'
                      : 'Ninguno'
                  }}
                </p>
              </div>
              <div>
                Colores:
                <v-row>
                  <v-col cols="1" v-for="(color, index) in product.colors" :key="index">
                    <v-avatar :color="color" size="15" style="border: 1px solid black"> </v-avatar>
                  </v-col>
                </v-row>
              </div>
              <v-row>
                <v-col class="mt-5 pb-0">
                  <strong
                    >PRECIO POR {{ product.quantity_group }} {{ type_group.toUpperCase() }}</strong
                  >
                  <div class="form-inline">
                    <v-avatar color="#0D52D6" size="30" class="text-white mr-1 t-0">
                      {{ catalogue.coin == 'soles' ? 'S./' : '$' }}
                    </v-avatar>
                    <p class="mt-4 ml-2 font-weight-bold">
                      {{ product.price_group | currency }}
                    </p>
                  </div>
                </v-col>
                <v-col class="mt-5 pb-0">
                  <strong>PRECIO UNITARIO</strong>
                  <div class="form-inline">
                    <v-avatar color="#0D52D6" size="30" class="text-white mr-1 my-2">
                      {{ catalogue.coin == 'soles' ? 'S./' : '$' }}
                    </v-avatar>
                    <p class="mt-3 ml-2">{{ product.price_unit | currency }}</p>
                  </div>
                </v-col>
              </v-row>
            </v-card-text>
            <v-btn @click="show = false" style="position: absolute; right: 10px; bottom: 20px">
              Cerrar
            </v-btn>
          </v-col>
        </v-row>
      </v-card-text>
    </v-card>
  </v-dialog>
</template>

<script>
import { mapActions, mapGetters } from 'vuex';
import ZoomOnHover from './ZoomOnHover';

export default {
  components: {
    ZoomOnHover: ZoomOnHover,
  },
  props: ['product', 'catalogue', 'value'],
  data: () => ({
    quantity: 1,
    loading: false,
    selection: 1,
    model: 0,
  }),
  methods: {
    ...mapActions('groupImport', ['addCart']),
    showProduct(product) {
      this.$router.push({
        name: 'ProductDetail',
        params: {
          type: 'product',
          sku: this.product.sku,
        },
      });
    },
    cartRoute() {
      this.$router.push({ name: 'cartGroupImport' });
    },
    cartView() {
      this.$router.push({
        name: 'cartGroupImport',
      });
    },
  },
  filters: {
    currency: function(value) {
      return parseFloat(value).toFixed(2);
    },
    date: function(value) {
      return moment(value).format('YYYY-MM-DD');
    },
    porcent: function(value) {
      return parseFloat(value) * 100 + ' %';
    },
  },
  computed: {
    show: {
      get() {
        return this.value;
      },
      set(value) {
        this.$emit('input', value);
      },
    },
    type_group() {
      let valor = '';
      if (this.product.quantity_group > 1) {
        valor = this.product.type_group;
      } else {
        valor = this.product.type_group;
      }
      return valor;
    },
  },
  mounted() {
    // console.log("Component", this.product);
  },
};
</script>
<style scoped>
@import '/css/zoomOnHover';
.v-img--offset {
  top: -24px;
  position: relative;
}
.w {
  width: 100%;
}
</style>
//
<div class="mb-3 subtitle-1">
//           {{ catalogue.coin }} {{ product.price_group }}
//         </div>
